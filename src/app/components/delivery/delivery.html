<!-- Header -->
<app-header></app-header>

<div class="delivery-container">

  <!-- üîµ Pasos -->
  <div class="cart-header">
    <div class="cart-step active">Mi Carrito</div>
    <div class="cart-step active">Delivery</div>
    <div class="cart-step">Pago</div>
    <div class="cart-step">Confirmaci√≥n</div>
  </div>

  <div class="delivery-content">

    <!-- üßæ Informaci√≥n de Env√≠o -->
    <div class="delivery-form">

      <h2>Informaci√≥n de env√≠o</h2>

      <label>T√≠tulo de la direcci√≥n</label>
      <input type="text" placeholder="Direcci√≥n" [(ngModel)]="envio.titulo" />

      <label>Nombre Completo</label>
      <div class="input-row">
        <input type="text" placeholder="Primer Nombre" [(ngModel)]="envio.nombre" />
        <input type="text" placeholder="Segundo Nombre" [(ngModel)]="envio.segundoNombre" />
        <input type="text" placeholder="Apellido" [(ngModel)]="envio.apellido" />
      </div>

      <label>Tu Direcci√≥n</label>
      <input type="text" placeholder="Direcci√≥n permanente" [(ngModel)]="envio.direccion" />

      <div class="input-row">
        <div>
          <label>C√≥digo Zip</label>
          <input type="text" placeholder="30531" [(ngModel)]="envio.zip" />
        </div>

        <div>
          <label>Pa√≠s</label>
          <select [(ngModel)]="envio.pais">
            <option>Per√∫</option>
            <option>Chile</option>
            <option>Argentina</option>
          </select>
        </div>
      </div>

      <div class="input-row">
        <div>
          <label>Ciudad</label>
          <select [(ngModel)]="envio.ciudad">
            <option>Cusco</option>
            <option>Lima</option>
            <option>Arequipa</option>
          </select>
        </div>
      </div>

      <div class="input-row">
        <div>
          <label>N√∫mero de Celular</label>
          <input type="text" placeholder="+51 999 999 999" [(ngModel)]="envio.celular" />
        </div>

        <div>
          <label>Tel√©fono</label>
          <input type="text" placeholder="(01) 999-9999" [(ngModel)]="envio.telefono" />
        </div>
      </div>

      <label>Tiempo de Entrega</label>
      <div class="radio-group">
        <label><input type="radio" name="time" value="6-12" [(ngModel)]="envio.horario" /> De 6am a 12pm</label>
        <label><input type="radio" name="time" value="12-4" [(ngModel)]="envio.horario" /> De 12pm a 4pm</label>
        <label><input type="radio" name="time" value="4-7" [(ngModel)]="envio.horario" /> De 4pm a 7pm</label>
      </div>

      <button class="back-btn" (click)="volverAlCarrito()">Volver al carrito</button>
    </div>

    <!-- üì¶ Resumen -->
    <div class="delivery-summary">
      <h2>Resumen</h2>

      <!-- üü¢ PRODUCTOS REALES DEL CARRITO -->
      <div class="summary-item" *ngFor="let item of carrito">
        <img [src]="'http://localhost:3000/uploads/productos/' + item.imagen" [alt]="item.nombre" />
        <div class="details">
          <h4>{{ item.nombre }}</h4>
          <p>Cantidad: {{ item.cantidad }}</p>
          <span class="price">S/.{{ item.precio * item.cantidad | number:'1.2-2' }}</span>
        </div>
      </div>

      <hr />

      <div class="price-info">
        <p>Subtotal: <span>S/.{{ subtotal | number:'1.2-2' }}</span></p>
        <p>Env√≠o: <span class="free">Gratis</span></p>
        <p>Descuento: <span class="discount">- S/.{{ descuento | number:'1.2-2' }}</span></p>
        <p class="total">Total: <span>S/.{{ total | number:'1.2-2' }}</span></p>
      </div>

      <h3>Shipping</h3>

      <div class="shipping-options">
        <label>
          <input type="radio" name="shipping" checked />
          <span>Standard Shipping</span>
          <p>Entrega en 3 a 6 d√≠as laborales (gratis).</p>
        </label>

        <label>
          <input type="radio" name="shipping" />
          <span>Express Shipping</span>
          <p>Entrega en 1 a 2 d√≠as laborales (cargo adicional S/.30).</p>
        </label>
      </div>

      <!-- üëâ Ahora s√≠ llama a la funci√≥n -->
      <button class="verify-btn" (click)="irAPayment()">Verificar ‚ûú</button>

    </div>

  </div>

</div>

<!-- Footer -->
<app-footer></app-footer>
