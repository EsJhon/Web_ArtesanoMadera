<!-- Header -->
<app-header></app-header>

<div class="payment-container">

  <!-- üîµ Pasos -->
  <div class="cart-header">
    <div class="cart-step active">Mi Carrito</div>
    <div class="cart-step active">Delivery</div>
    <div class="cart-step active">Pago</div>
    <div class="cart-step">Confirmaci√≥n</div>
  </div>

  <!-- üî∂ CONTENEDOR DE LAS DOS COLUMNAS -->
  <div class="payment-columns">

    <!-- Secci√≥n izquierda: Informaci√≥n de pago -->
    <div class="payment-info">
      <h2>Informaci√≥n de pago</h2>
      <hr />

      <!-- Mostrar datos del env√≠o -->
      <div class="delivery-info-box">
        <h3>Datos de Env√≠o</h3>
        <p><strong>Nombre:</strong> {{ envio.nombre }} {{ envio.apellido }}</p>
        <p><strong>Direcci√≥n:</strong> {{ envio.direccion }}</p>
        <p><strong>Ciudad:</strong> {{ envio.ciudad }}</p>
        <p><strong>Pa√≠s:</strong> {{ envio.pais }}</p>
        <p><strong>Celular:</strong> {{ envio.celular }}</p>
        <p><strong>Horario:</strong> {{ envio.horario }}</p>
      </div>

      <form>
        <div class="form-group">
          <label>Nombre del titular de la tarjeta</label>
          <input type="text" placeholder="Tu Nombre" />
        </div>

        <div class="form-group">
          <label>N√∫mero de tarjeta</label>
          <input type="text" placeholder="N√∫mero de tarjeta" maxlength="16" />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Mes de vencimiento</label>
            <select>
              <option>Mes</option>
              <option>Enero</option>
              <option>Febrero</option>
              <option>Marzo</option>
              <option>Abril</option>
              <option>Mayo</option>
              <option>Junio</option>
              <option>Julio</option>
              <option>Agosto</option>
              <option>Setiembre</option>
              <option>Octubre</option>
              <option>Noviembre</option>
              <option>Diciembre</option>
            </select>
          </div>

          <div class="form-group">
            <label>A√±o</label>
            <select>
              <option>A√±o</option>
              <option>2025</option>
              <option>2026</option>
              <option>2027</option>
              <option>2028</option>
              <option>2029</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>CVV</label>
          <input type="password" placeholder="CVV" maxlength="4" />
        </div>

        <div class="form-group">
          <label>Otras opciones de pago</label>
          <select>
            <option>Seleccionar m√©todo</option>
            <option>Transferencia bancaria</option>
            <option>PayPal</option>
            <option>Yape / Plin</option>
          </select>
        </div>

        <button type="button" class="btn-volver" routerLink="/delivery">Volver a Direcciones</button>

      </form>
    </div>

    <!-- Secci√≥n derecha: Resumen -->
    <div class="payment-summary">
      <h2>Resumen</h2>

      <!-- PRODUCTOS REALES DEL CARRITO -->
      <div class="summary-item" *ngFor="let item of carrito">
        <img [src]="'http://localhost:3000/uploads/productos/' + item.imagen" [alt]="item.nombre" />
        <div class="summary-details">
          <p class="item-name">{{ item.nombre }}</p>
          <p class="item-price">Cantidad: {{ item.cantidad }} ‚Äî 
            <span>S/.{{ item.precio * item.cantidad | number:'1.2-2' }}</span>
          </p>
        </div>
      </div>

      <hr />

      <div class="price-breakdown">
        <p>Subtotal: <span>S/.{{ subtotal | number:'1.2-2' }}</span></p>
        <p>Env√≠o: <span class="free">Gratis</span></p>
        <p>Descuento: <span class="discount">- S/.{{ descuento | number:'1.2-2' }}</span></p>
        <hr />
        <p class="total">Total: <span>S/.{{ total | number:'1.2-2' }}</span></p>
      </div>

      <div class="shipping-info">
        <h3>Env√≠o</h3>
        <p>Env√≠o est√°ndar</p>
        <small>Entrega estimada en 3 a 6 d√≠as h√°biles. Gratis.</small>
      </div>

      <button class="btn-pagar" (click)="irAConfirmacion()">
        Pagar S/.{{ total | number:'1.2-2' }} ‚Üí
      </button>
    </div>

  </div> <!-- FIN payment-columns -->

</div>

<!-- Footer -->
<app-footer></app-footer>
