<app-header></app-header>

<div class="producto-detalle-page" *ngIf="product">
  <main class="producto-detalle-container">
    
    <!-- ðŸŸ¤ Detalle del producto -->
    <section class="producto-detalle">
      
      <!-- GalerÃ­a de imÃ¡genes -->
      <div class="galeria">
        <div class="miniaturas">
          <img *ngFor="let img of [product.imagen, product.imagen, product.imagen]" 
               [src]="'http://localhost:3000/uploads/productos/' + img" 
               [alt]="product.nombre + ' miniatura'" />
        </div>
        <div class="imagen-principal">
          <img [src]="'http://localhost:3000/uploads/productos/' + product.imagen" [alt]="product.nombre" />
        </div>
      </div>

      <!-- InformaciÃ³n del producto -->
      <div class="info-producto">
        <h2>{{ product.nombre }}</h2>

        <div class="stock">
          Disponibilidad: <span>{{ product.stock }} productos en stock</span>
        </div>

        <div class="cantidad">
          <button (click)="disminuirCantidad()">-</button>
          <span>{{ cantidad }}</span>
          <button (click)="aumentarCantidad()">+</button>
        </div>

        <!-- <button class="btn agregar">Comprar</button>  -->
        <button class="btn agregar" (click)="agregarAlCarrito()">Agregar al carrito ðŸ›’</button>
      </div>

    </section>

    <!-- ðŸŸ¤ Tabs de detalles -->
    <section class="detalles">
      <div class="tabs">
        <label class="active">InformaciÃ³n del producto</label>
      </div>
      <div class="contenido">
        <p>{{ product.descripcion }}</p>
      </div>
    </section>

    <!-- ðŸŸ¤ TambiÃ©n te puede gustar -->
    <section class="tambien-gustar" *ngIf="productosRelacionados.length > 0">
      <h3>TambiÃ©n te puede gustar</h3>

      <div class="carousel-container">
        <button class="nav left" (click)="scrollLeft()">â—€</button>

        <div class="carousel" #carousel>
          <div 
            class="item" 
            *ngFor="let item of productosRelacionados" 
            [routerLink]="['/productdet', item.id]"
          >
            <img [src]="'http://localhost:3000/uploads/productos/' + item.imagen" [alt]="item.nombre">
            <h4>{{ item.nombre }}</h4>
            <p class="precio">S/.{{ item.precio }}</p>
            <p class="stock">Stock: {{ item.stock }} unidades</p>
          </div>
        </div>

        <button class="nav right" (click)="scrollRight()">â–¶</button>
      </div>
    </section>

    <!-- ðŸŸ¤ Ãšltimos productos vistos -->
    <section class="ultimos-vistos" *ngIf="productosVistos.length > 0">
      <h3>Ãšltimos productos vistos</h3>
      <div class="grid-vistos">
        <div 
          class="producto-visto" 
          *ngFor="let visto of productosVistos" 
          [routerLink]="['/productdet', visto.id]"
        >
          <img [src]="'http://localhost:3000/uploads/productos/' + visto.imagen" [alt]="visto.nombre">
          <h4>{{ visto.nombre }}</h4>
          <p class="precio">S/.{{ visto.precio }}</p>
          <p class="stock">Stock: {{ visto.stock }} unidades</p>
          <p class="descripcion">{{ visto.descripcion }}</p>
        </div>
      </div>
    </section>

  </main>
</div>

<app-footer></app-footer>
